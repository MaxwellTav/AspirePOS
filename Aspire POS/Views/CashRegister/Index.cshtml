@{
    ViewData["Title"] = "Caja | Cerrada";
}

<body>
    <style>
        .control-group {
            display: flex;
            align-items: center;
        }

        .quantity-input {
            width: 70px;
            text-align: center;
            font-size: 1rem;
        }
    </style>

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <div class="card-footer text-center">
                    <div class="input-group">
                        <input type="text" placeholder="CÓDIGO DEL PRODUCTO" class="form-control">
                        <span class="input-group-append">
                            <button type="submit" class="btn btn-secondary"><i class="fas fa-search fa-fw"></i></button>
                        </span>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <div class="card-footer text-center p-0 m-0">
                    <small class="d-block" style="font-size: 10px; margin-top: 0;">modo lector QR</small>
                    <div class="input-group justify-content-center p-0 m-0">
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <div class="card-footer text-center">
                    <div class="input-group">
                        <input value="Cajero 01" class="form-control" disabled/>
                        <input value="Caja 01" class="form-control" disabled/>
                    </div>
                </div>
            </li>
        </ul>

        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                    <i class="fas fa-expand-arrows-alt"></i>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#" role="button" id="menuCajaButton">
                    <i class="fas fa-th-large"></i>
                </a>
            </li>
        </ul>
    </nav>

    <div class="row" style="overflow: hidden; margin: 0; overflow-x: hidden; margin: 0; padding: 0;">
        <!-- Productos -->
        <section class="col-lg-7">
            <!-- Tabs principales -->
            <div class="card card-primary card-tabs" style="margin-bottom: 0;">
                <!-- Se eliminó el margen inferior -->
                <div class="card-header p-0 pt-0">
                    <ul class="nav nav-tabs" id="custom-tabs-left" role="tablist">
                        <li class="pt-3 px-1"><h3 class="card-title">• PRODUCTOS •</h3></li>
                        <li class="nav-item">
                            <a class="nav-link active" id="tab1-left" data-toggle="pill" href="#tab1-left-content" role="tab" aria-controls="tab1-left-content" aria-selected="true">Todos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tab2-left" data-toggle="pill" href="#tab2-left-content" role="tab" aria-controls="tab2-left-content" aria-selected="false">Descuento</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tab3-left" data-toggle="pill" href="#tab3-left-content" role="tab" aria-controls="tab3-left-content" aria-selected="false">Limitados</a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content">
                        <!-- Contenido del primer tab -->
                        <div class="tab-pane fade show active" id="tab1-left-content" role="tabpanel" aria-labelledby="tab1-left" style="max-height: 450px; overflow-y: auto; overflow-x: hidden;">
                            <div class="row">
                                @for (int i = 0; i < 50; i++)
                                {
                                    <div class="col-6 col-sm-3 mb-2 d-flex justify-content-center">
                                        <button class="card btn border-1" style="height: 170px; width: 150px; cursor: pointer;" onclick="verProducto()">
                                            <div class="card-body text-center p-3">
                                                <img src="https://via.placeholder.com/100" class="card-img-top" alt="Producto @i" style="height: 70px; object-fit: cover; margin-bottom: 5px;">
                                                <h6 class="mb-1" style="font-size: 1rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Producto @(i + 1)</h6>
                                                <p class="mb-0" style="font-size: 0.9rem;">$9.99</p>
                                            </div>
                                        </button>
                                    </div>
                                }
                            </div>
                        </div>

                        <!-- Contenido del segundo tab -->
                        <div class="tab-pane fade" id="tab2-left-content" role="tabpanel" aria-labelledby="tab2-left">
                            Contenido del Tab 2 en la columna izquierda.
                        </div>

                        <!-- Contenido del segundo tab -->
                        <div class="tab-pane fade" id="tab3-left-content" role="tabpanel" aria-labelledby="tab3-left">
                            Contenido del Tab 3 en la columna izquierda.
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Carrito -->
        <section class="col-lg-5" style="overflow-x: hidden;">
            <!-- Tabs secundarios -->
            <div class="card card-secondary card-tabs" style="margin-bottom: 0;">
                <div class="card-header p-0 pt-0">
                    <ul class="nav nav-tabs" id="custom-tabs-right" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="tab1-right" data-toggle="pill" href="#tab1-right-content" role="tab" aria-controls="tab1-right-content" aria-selected="true">Carrito</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="tab2-right" data-toggle="pill" href="#tab2-right-content" role="tab" aria-controls="tab2-right-content" aria-selected="false">Pendientes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link">
                                Carro #123
                                <button class="btn-sm btn-danger"><i class="fas fa-trash"></i> Limpiar</button>
                                <button class="btn-sm btn-primary"><i class="fas fa-save"></i> Guardar</button>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="card-body">
                    <div class="tab-content">
                        <!-- Contenido del primer tab en la columna derecha (Carrito) -->
                        <div class="tab-pane fade show active" id="tab1-right-content" role="tabpanel" aria-labelledby="tab1-right" style="max-height: 311px; overflow-y: auto;">
                            <!-- Item -->
                            @for (int i = 0; i < 7; i++)
                            {
                                <div class="product-item d-flex align-items-center mb-3">
                                    <img class="img-thumbnail mr-3" style="width: 75px; height: 75px;">
                                    <div style="flex: 1;">
                                        @* <h6 class="mb-0"><strong>Producto de Ejemplo</strong> <span class="badge badge-warning">Editado</span></h6> *@
                                        <p class="mb-1">Descripción breve del producto.</p>
                                        <div>Unidad <input type="number" class="quantity-input" style="width: 90px" placeholder="$25.00" disabled /></div>
                                        <div>Total <input type="number" class="quantity-input" style="width: 90px" placeholder="$25.00" disabled /></div>
                                    </div>
                                    <!-- Contenedor reducido a la derecha -->
                                    <div class="control-group ml-auto">
                                        <button class="btn btn-warning"><i class="fas fa-pen"></i></button>
                                        <input type="number" class="form-control quantity-input" placeholder="1" min="1">
                                        <button class="btn btn-danger mr-1"><i class="fas fa-times"></i></button>
                                    </div>
                                </div>
                                <hr class="my-2">
                            }
                        </div>
                        <!-- Contenido del segundo tab en la columna derecha (Pendientes) -->
                        <div class="tab-pane fade" id="tab2-right-content" role="tabpanel" aria-labelledby="tab2-right" style="max-height: 311px; overflow-y: auto;">
                            <!-- Item -->
                            @for (int i = 0; i < 7; i++)
                            {
                                <div class="product-item d-flex align-items-center mb-3">
                                    <img class="img-thumbnail mr-3" style="width: 75px; height: 75px;">
                                    <div style="flex: 1;">
                                        <h6 class="mb-0"><strong>Pedido de ejemplo #@(i + 1)</strong></h6>
                                        <p class="mb-1">Descripción breve del producto más detallada y continúa con una descripción breve del producto más detallada.</p>
                                        <span class="badge badge-warning">Editado</span>
                                        <span class="badge badge-danger">Pendiente</span>
                                        <span class="badge badge-secondary">12:00 Am | Lunes 01/01/20XX</span>
                                    </div>
                                    <!-- Contenedor reducido a la derecha -->
                                    <div class="control-group ml-auto">
                                        <button class="btn btn-danger btn-lg mr-1"><i class="fas fa-minus"></i></button>
                                        <button class="btn btn-primary btn-lg mr-1"><i class="fas fa-eye"></i></button>
                                    </div>
                                </div>
                                <hr class="my-2">
                            }
                        </div>


                        <br />
                        <!-- Resumen de pago -->
                        <div class="card">
                            <div>
                                <div>
                                    <h2>
                                        <span class="badge badge-secondary">Sub-Total:<strong> $19.99</strong></span>
                                        <span class="badge badge-primary">Total:<strong> $19.99</strong></span>
                                    </h2>
                                </div>
                                <div>
                                    <a class="btn btn-app bg-info">
                                        <i class="fas fa-tag"></i> Descuentos y deducciones
                                    </a>
                                    <a class="btn btn-app bg-warning">
                                        <i class="fas fa-truck"></i> Envío
                                    </a>
                                    <a class="btn btn-app bg-success" style="width: 100%; max-width: 120px;">
                                        <i class="fas fa-dollar-sign"></i> Procesar y Pagar
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>

<script>
    function verProducto() {
        Swal.fire('Producto seleccionado', 'Aquí puedes agregar detalles del producto', 'info');
    }

    document.getElementById('menuCajaButton').addEventListener('click', function (event) {
        event.preventDefault();

        Swal.fire({
            title: 'Menú del cajero',
            html: `
                        <div style="text-align: left;">
                            <div class="info-text"><strong>Hora de inicio de la jornada:</strong> 08:00 AM</div>
                            <div class="info-text"><strong>Órdenes realizadas:</strong> 12</div>
                            <div class="info-text"><strong>Órdenes pendientes:</strong> 5</div>
                            <div class="info-text"><strong>Ventas totales:</strong> $500</div>
                            <div class="info-text"><strong>Código de la caja:</strong> C123</div>
                            <div class="info-text"><strong>Nombre del cajero:</strong> Juan Pérez</div>
                            <div class="info-text"><strong>Cantidad de efectivo en la caja:</strong> $300</div>
                        </div>
                        <div class="btn-menu-container">
                            <button id="descargarReporte" class="btn btn-primary btn-menu">Descargar Reporte</button>
                            <button id="verTodasOrdenes" class="btn btn-primary btn-menu">Ver Todas las Órdenes</button>
                            <button id="irALogin" class="btn btn-secondary btn-menu">Cierre de sesión</button>
                            <button id="arqueoCaja" class="btn btn-warning btn-menu">Arqueo</button>
                            <button id="cierreCaja" class="btn btn-danger btn-menu">Cierre de Caja</button>
                        </div>
                    `,
            showCloseButton: true,
            showConfirmButton: false
        });

        // Agregar eventos a los botones
        document.getElementById('descargarReporte').addEventListener('click', function () {
            Swal.fire('Reporte descargado', '', 'success');
        });

        document.getElementById('verTodasOrdenes').addEventListener('click', function () {
            Swal.fire('Mostrando todas las órdenes', '', 'info');
        });

        document.getElementById('arqueoCaja').addEventListener('click', function () {
            Swal.fire('Realizando arqueo de caja...', '', 'warning');
        });

        document.getElementById('cierreCaja').addEventListener('click', function () {
            Swal.fire('Cerrando la caja...', '', 'error');
        });

        document.getElementById('irALogin').addEventListener('click', function () {
            window.location.href = '@Url.Action("Index", "Login")';
        });
    });
</script>